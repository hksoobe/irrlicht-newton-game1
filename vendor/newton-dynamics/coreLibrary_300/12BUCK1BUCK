cxx_precompiled_header(
    name = "dg.h",
    src = "source/core/dg.h",
    deps = [],
)

cxx_library(
    name = "core",
    precompiled_header = ":dg.h",
    headers = glob([ "source/core/*.h" ]),
    exported_headers = {
        "dg.h": "source/core/dg.h",
        "dgAABBPolygonSoup.h": "source/core/dgAABBPolygonSoup.h",
        "dgArray.h": "source/core/dgArray.h",
        "dgAsyncThread.h": "source/core/dgAsyncThread.h",
        "dgConvexHull3d.h": "source/core/dgConvexHull3d.h",
        "dgConvexHull4d.h": "source/core/dgConvexHull4d.h",
        "dgCRC.h": "source/core/dgCRC.h",
        "dgDebug.h": "source/core/dgDebug.h",
        "dgDelaunayTetrahedralization.h": "source/core/dgDelaunayTetrahedralization.h",
        "dgFastQueue.h": "source/core/dgFastQueue.h",
        "dgGeneralMatrix.h": "source/core/dgGeneralMatrix.h",
        "dgGeneralVector.h": "source/core/dgGeneralVector.h",
        "dgGoogol.h": "source/core/dgGoogol.h",
        "dgGraph.h": "source/core/dgGraph.h",
        "dgHeap.h": "source/core/dgHeap.h",
        "dgIntersections.h": "source/core/dgIntersections.h",
        "dgList.h": "source/core/dgList.h",
        "dgMatrix.h": "source/core/dgMatrix.h",
        "dgMemory.h": "source/core/dgMemory.h",
        "dgMutexThread.h": "source/core/dgMutexThread.h",
        "dgNode.h": "source/core/dgNode.h",
        "dgObb.h": "source/core/dgObb.h",
        "dgPathFinder.h": "source/core/dgPathFinder.h",
        "dgPlane.h": "source/core/dgPlane.h",
        "dgPolygonSoupBuilder.h": "source/core/dgPolygonSoupBuilder.h",
        "dgPolygonSoupDatabase.h": "source/core/dgPolygonSoupDatabase.h",
        "dgPolyhedra.h": "source/core/dgPolyhedra.h",
        "dgPolyhedraMassProperties.h": "source/core/dgPolyhedraMassProperties.h",
        "dgQuaternion.h": "source/core/dgQuaternion.h",
        "dgRandom.h": "source/core/dgRandom.h",
        "dgRef.h": "source/core/dgRef.h",
        "dgRefCounter.h": "source/core/dgRefCounter.h",
        "dgRtti.h": "source/core/dgRtti.h",
        "dgSmallDeterminant.h": "source/core/dgSmallDeterminant.h",
        "dgSPDMatrix.h": "source/core/dgSPDMatrix.h",
        "dgStack.h": "source/core/dgStack.h",
        "dgStdafx.h": "source/core/dgStdafx.h",
        "dgThread.h": "source/core/dgThread.h",
        "dgThreadHive.h": "source/core/dgThreadHive.h",
        "dgThreadProfiler.h": "source/core/dgThreadProfiler.h",
        "dgTree.h": "source/core/dgTree.h",
        "dgTypes.h": "source/core/dgTypes.h",
        "dgVector.h": "source/core/dgVector.h",
    },
    header_namespace = "",
    srcs = glob([ "source/core/*.cpp" ]),
)

cxx_library(
    name = "meshUtil",
    headers = glob([ "source/meshUtil/*.h" ]),
    srcs = glob([ "source/meshUtil/*.cpp" ]),
    exported_headers = {
        "dgMeshEffect.h": "source/meshUtil/dgMeshEffect.h"
    },
    # deps = [ ":physics" ],
    header_namespace = "",
)

cxx_precompiled_header(
    name = "dgPhysicsStdafx",
    src = "source/physics/dgPhysicsStdafx.h",
    deps = [ ":core" ],
)

cxx_library(
    name = "physics",
    precompiled_header = ":dgPhysicsStdafx",
    headers = glob([ "source/physics/*.h" ]),
    exported_headers = {
        "dgBallConstraint.h": "source/physics/dgBallConstraint.h",
        "dgBilateralConstraint.h": "source/physics/dgBilateralConstraint.h",
        "dgBody.h": "source/physics/dgBody.h",
        "dgBodyMasterList.h": "source/physics/dgBodyMasterList.h",
        "dgBroadPhase.h": "source/physics/dgBroadPhase.h",
        "dgBroadPhaseAggregate.h": "source/physics/dgBroadPhaseAggregate.h",
        "dgBroadPhaseDefault.h": "source/physics/dgBroadPhaseDefault.h",
        "dgBroadPhasePersistent.h": "source/physics/dgBroadPhasePersistent.h",
        "dgCollision.h": "source/physics/dgCollision.h",
        "dgCollisionBox.h": "source/physics/dgCollisionBox.h",
        "dgCollisionBVH.h": "source/physics/dgCollisionBVH.h",
        "dgCollisionCapsule.h": "source/physics/dgCollisionCapsule.h",
        "dgCollisionChamferCylinder.h": "source/physics/dgCollisionChamferCylinder.h",
        "dgCollisionCompound.h": "source/physics/dgCollisionCompound.h",
        "dgCollisionCompoundFractured.h": "source/physics/dgCollisionCompoundFractured.h",
        "dgCollisionCone.h": "source/physics/dgCollisionCone.h",
        "dgCollisionConvex.h": "source/physics/dgCollisionConvex.h",
        "dgCollisionConvexHull.h": "source/physics/dgCollisionConvexHull.h",
        "dgCollisionConvexPolygon.h": "source/physics/dgCollisionConvexPolygon.h",
        "dgCollisionCylinder.h": "source/physics/dgCollisionCylinder.h",
        "dgCollisionDeformableClothPatch.h": "source/physics/dgCollisionDeformableClothPatch.h",
        "dgCollisionDeformableMesh.h": "source/physics/dgCollisionDeformableMesh.h",
        "dgCollisionDeformableSolidMesh.h": "source/physics/dgCollisionDeformableSolidMesh.h",
        "dgCollisionHeightField.h": "source/physics/dgCollisionHeightField.h",
        "dgCollisionInstance.h": "source/physics/dgCollisionInstance.h",
        "dgCollisionMesh.h": "source/physics/dgCollisionMesh.h",
        "dgCollisionNull.h": "source/physics/dgCollisionNull.h",
        "dgCollisionScene.h": "source/physics/dgCollisionScene.h",
        "dgCollisionSphere.h": "source/physics/dgCollisionSphere.h",
        "dgCollisionTaperedCapsule.h": "source/physics/dgCollisionTaperedCapsule.h",
        "dgCollisionTaperedCylinder.h": "source/physics/dgCollisionTaperedCylinder.h",
        "dgCollisionUserMesh.h": "source/physics/dgCollisionUserMesh.h",
        "dgConstraint.h": "source/physics/dgConstraint.h",
        "dgContact.h": "source/physics/dgContact.h",
        "dgCorkscrewConstraint.h": "source/physics/dgCorkscrewConstraint.h",
        "dgDeformableBodiesUpdate.h": "source/physics/dgDeformableBodiesUpdate.h",
        "dgDeformableBody.h": "source/physics/dgDeformableBody.h",
        "dgDeformableContact.h": "source/physics/dgDeformableContact.h",
        "dgDynamicBody.h": "source/physics/dgDynamicBody.h",
        "dgHingeConstraint.h": "source/physics/dgHingeConstraint.h",
        "dgKinematicBody.h": "source/physics/dgKinematicBody.h",
        "dgPhysics.h": "source/physics/dgPhysics.h",
        "dgPhysicsStdafx.h": "source/physics/dgPhysicsStdafx.h",
        "dgSkeletonContainer.h": "source/physics/dgSkeletonContainer.h",
        "dgSlidingConstraint.h": "source/physics/dgSlidingConstraint.h",
        "dgUniversalConstraint.h": "source/physics/dgUniversalConstraint.h",
        "dgUpVectorConstraint.h": "source/physics/dgUpVectorConstraint.h",
        "dgUserConstraint.h": "source/physics/dgUserConstraint.h",
        "dgWorld.h": "source/physics/dgWorld.h",
        "dgWorldDynamicUpdate.h": "source/physics/dgWorldDynamicUpdate.h",
    },
    srcs = glob([ "source/physics/*.cpp" ]),
    header_namespace = "",
)