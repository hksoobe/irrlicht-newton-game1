cxx_library(
    name = "luaconf",
    headers = [ "src/luaconf.h" ],
    exported_headers = {
        "luaconf.h": "src/luaconf.h"
    },
    header_namespace = "",
)

cxx_library(
    name = "lua",
    headers = glob([ "src/*.h" ]),
    exported_headers = subdir_glob([ ("src", "*.h") ]),
    header_namespace = "",
    srcs = glob([ "src/*.c" ], excludes = [ "src/luac.c" ]),
    compiler_flags = [
        "-std=gnu99",
        "-O2",
        "-Wall",
        "-Wextra",
        "-DLUA_COMPAT_5_2"
    ],
    linker_flags = [ "-lm" ],
    deps = [ ":luaconf" ],
    visibility = [ "PUBLIC" ]
)
